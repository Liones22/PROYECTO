<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Banco Virtual | Control Financiero Profesional</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.13.8/css/dataTables.bootstrap5.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/animations.css" />
  </head>
  <body>
    <header class="hero py-4 py-lg-5 mb-4">
      <div class="container-xl">
        <div class="d-flex flex-column flex-lg-row justify-content-between gap-3 align-items-start align-items-lg-center">
          <div>
            <span class="badge badge-soft mb-2">Banco Virtual</span>
            <h1 class="text-white fw-bold mb-2">Dashboard financiero inteligente</h1>
            <p class="text-white-50 mb-0">Monitorea ingresos, egresos, presupuesto y tendencia mensual con herramientas profesionales.</p>
          </div>
          <div class="d-flex gap-2 flex-wrap">
            <button id="seedBtn" class="btn btn-light btn-sm">Cargar demo</button>
            <button id="clearBtn" class="btn btn-outline-light btn-sm">Limpiar datos</button>
          </div>
        </div>
      </div>
    </header>

    <main class="container-xl pb-5">
      <section id="kpiMount" class="row g-3 mb-3"></section>

      <section class="row g-3 mb-3">
        <div class="col-12 col-xl-4">
          <div class="card shadow-soft h-100 fade-in-up">
            <div class="card-body">
              <h5 class="card-title mb-3">Nueva transacción</h5>
              <form id="transactionForm" class="row g-3" novalidate>
                <div class="col-12">
                  <label for="txDate" class="form-label">Fecha</label>
                  <input id="txDate" type="date" class="form-control" required />
                </div>
                <div class="col-12">
                  <label for="txDescription" class="form-label">Descripción</label>
                  <input id="txDescription" type="text" class="form-control" placeholder="Ej. Pago de servicios" required />
                </div>
                <div class="col-12">
                  <label for="txAmount" class="form-label">Monto</label>
                  <input id="txAmount" type="number" step="0.01" min="0" class="form-control" placeholder="0.00" required />
                </div>
                <div class="col-sm-6">
                  <label for="txType" class="form-label">Tipo</label>
                  <select id="txType" class="form-select" required>
                    <option value="">Selecciona...</option>
                    <option value="income">Ingreso</option>
                    <option value="expense">Egreso</option>
                  </select>
                </div>
                <div class="col-sm-6">
                  <label for="txConcept" class="form-label">Concepto</label>
                  <select id="txConcept" class="form-select" required></select>
                </div>
                <div class="col-12 d-grid">
                  <button class="btn btn-primary" type="submit">Guardar movimiento</button>
                </div>
              </form>

              <hr class="my-4" />

              <h6 class="mb-2">Presupuesto mensual de egresos</h6>
              <div class="input-group mb-2">
                <span class="input-group-text">$</span>
                <input id="budgetInput" type="number" min="0" step="0.01" class="form-control" placeholder="2000" />
                <button id="saveBudgetBtn" class="btn btn-outline-primary" type="button">Guardar</button>
              </div>
              <div class="progress mb-2" role="progressbar" aria-label="Uso de presupuesto" aria-valuemin="0" aria-valuemax="100">
                <div id="budgetProgress" class="progress-bar" style="width: 0%"></div>
              </div>
              <small id="budgetLabel" class="text-muted">Sin presupuesto configurado.</small>
            </div>
          </div>
        </div>

        <div class="col-12 col-xl-8">
          <div class="card shadow-soft h-100 fade-in-up delay-1">
            <div class="card-body">
              <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2 mb-3">
                <h5 class="card-title mb-0">Historial de transacciones</h5>
                <div class="d-flex gap-2 flex-wrap w-100 w-md-auto">
                  <select id="quickFilter" class="form-select form-select-sm w-auto">
                    <option value="all">Todos</option>
                    <option value="income">Ingresos</option>
                    <option value="expense">Egresos</option>
                  </select>
                  <button id="exportBtn" class="btn btn-outline-secondary btn-sm" type="button">Exportar CSV</button>
                </div>
              </div>

              <div class="table-responsive">
                <table id="transactionsTable" class="table table-striped table-hover align-middle w-100">
                  <thead>
                    <tr>
                      <th>Fecha</th>
                      <th>Descripción</th>
                      <th>Concepto</th>
                      <th>Tipo</th>
                      <th class="text-end">Monto</th>
                      <th class="text-center">Acciones</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="row g-3">
        <div class="col-12 col-lg-6">
          <div class="card shadow-soft chart-card fade-in-up delay-2">
            <div class="card-body">
              <h6 class="mb-3">Distribución por concepto</h6>
              <canvas id="conceptChart"></canvas>
            </div>
          </div>
        </div>
        <div class="col-12 col-lg-6">
          <div class="card shadow-soft chart-card fade-in-up delay-3">
            <div class="card-body">
              <h6 class="mb-3">Flujo mensual (ingresos vs egresos)</h6>
              <canvas id="trendChart"></canvas>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div class="modal fade" id="editModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Editar transacción</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <form id="editForm">
            <div class="modal-body" id="editTemplateMount"></div>
            <div class="modal-footer">
              <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary">Guardar cambios</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.8/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script type="module" src="assets/js/main.js"></script>
  </body>
</html>
